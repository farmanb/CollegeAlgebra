<?xml version="1.0" encoding="UTF-8"?>

<section xml:id="sec-logarithms" xmlns:xi="http://www.w3.org/2001/XInclude">
  <title>The Logarithm</title>
  <introduction>
    <p>
      Assume <m>a \neq 1</m> is a positive real number.
      The graph of <m>\Exp{a} \colon \R \to (0,\infty)</m> satisfies <xref ref="thm-horizontal_line_test" text="title"/>.
    </p>
    <figure>
      <sidebyside>
	<image>
	  <latex-image>
	    \begin{tikzpicture}[pics/legend entry/.style={code={%
            \draw[pic actions]
	    (-0.5,0.25) -- (0.5,0.25);}}]
	    \draw[very thin,color=gray] (-5,0) grid (5,5);

	    \draw[very thick,->] (-5.2,0) -- (5.2,0) node[right] {$x$};
	    \draw[very thick,->] (0,-.2) -- (0,5.2) node[above] {$y$};
	    
	    \begin{scope}[domain=-5:5]
	    \clip (-5,0) rectangle (5,5);
	    \draw [color=blue,thick] plot[smooth,samples=500] (\x,{(exp(\x)});
	    \end{scope}

	    \draw [dashed,thick] plot[domain=-5:5] (\x,3);
	    
	    \node at ({ln(3)},3) {$\bullet$};
	    \end{tikzpicture}
	  </latex-image>
	</image>
	<image>
	  <latex-image>
	    \begin{tikzpicture}[pics/legend entry/.style={code={%
            \draw[pic actions]
	    (-0.5,0.25) -- (0.5,0.25);}}]
	    \draw[very thin,color=gray] (-5,0) grid (5,5);

	    \draw[very thick,->] (-5.2,0) -- (5.2,0) node[right] {$x$};
	    \draw[very thick,->] (0,-.2) -- (0,5.2) node[above] {$y$};
	    
	    \begin{scope}[domain=-5:5]
	    \clip (-5,0) rectangle (5,5);
	    \draw [color=blue,thick] plot[smooth,samples=500] (\x,{(exp(-\x)});
	    \end{scope}

	    \draw [dashed,thick] plot[domain=-5:5] (\x,3);
	    
	    \node at ({-ln(3)},3) {$\bullet$};
	    \end{tikzpicture}
	  </latex-image>
	</image>
      </sidebyside>
      <caption>The horizontal line test for <m>\Exp{a} \colon \R \to (0,\infty)</m> with <m>1 \lt a</m> (left) and <m>a \lt 1</m> (right).</caption>
    </figure>
    <p>
      We can verify this algebraically as follows.
      Suppose the points <m>\left(x_1, a^{x_1}\right)</m> and <m>\left(x_2, a^{x_2}\right)</m> both lie on the same horizontal line.
      Since they lie on a horizontal line, they must have the same <m>y</m>-coordinates and so
      <md>
	<mrow>a^{x_1} \amp = a^{x_2} \amp\amp \text{Divide both sides by}\ a^{x_2}</mrow>
	<mrow>\frac{a^{x_1}}{a^{x_2}} \amp = 1 \amp\amp\text{Combine exponents}</mrow>
	<mrow>a^{x_1 - x_2} \amp= 1</mrow>
      </md>
      implies that <m>x_1 - x_2 = 0</m> and so <m>x_1 = x_2</m>.
      That is to say, the two points are the <em>same</em> point and so any horizontal line intersects the graph in at most one point.
      This tells us the exponential function is invertible.
    </p>
  </introduction>

  <definition xml:id="def-log_base_a">
    <title>The Logarithm with Base <m>a</m></title>
    <p>
      Assume <m>a \neq 1</m> is a positive real number.
      The <term>logarithm with base <m>a</m></term>,
      <idx>
	<h>Function</h>
	<h>Logarithm</h>
	<h>Base <m>a</m></h>
      </idx>
      <m>\log_a \colon (0,\infty) \to \R</m>,
      <notation>
	<usage><m>\log_a</m></usage>
	<description>The logarithm with base <m>a</m></description>
      </notation>
      is the <xref ref="def-composition_inverse" text="title"/> of <m>\operatorname{Exp}{a} \colon \R \to (0, \infty)</m>.
    </p>
    <p>
      In particular, for every real number <m>x</m> and every positive real number <m>y</m>,
      <me>\log_a \circ \Exp{a}(x) = \log_a(a^x) = x
      \quad\text{and}\quad
      \Exp{a} \circ \log_a(y) = a^{\log_a(y)} = y.</me>
    </p>
  </definition>

  <definition>
    <title>The Natural Logarithm</title>
    <p>
      The <term>natural logarithm</term>,
      <idx>
	<h>Function</h>
	<h>Logarithm</h>
	<h>Base <m>a</m></h>
      </idx>
      <m>\ln \colon (0, \infty) \to \R</m>,
      <notation>
	<usage><m>\ln</m></usage>
	<description>The natural logarithm</description>
      </notation>
      is the logarithm with base <m>e</m>.
    </p>
  </definition>

  <subsection>
    <title>Properties of the Logarithm</title>
    <p>
      As the composition inverse of <m>\Exp{a} \colon \R \to (0, \infty)</m>, the logarithm inherits properties that are very similar to the <xref ref="thm-properties_exp" text="title"/>.
      To describe these properties algebraically for a given base, <m>a</m>, it is helpful to phrase the relationship between the exponential and the logarithm as pairing each real number <m>x</m> with a positive real number <m>y</m> via
      <men xml:id="eq-exp_log">y = \Exp{a}(x) \quad\text{and}\quad x = \log_a(y).</men>
    </p>
    <p>
      Starting from the property <m>\Exp{a}(0) = 1</m>, taking <m>x = 0</m> and <m>y = 1</m> in <xref ref="eq-exp_log"/> allows us to write
      <me>1 = \Exp{a}(0) \quad\text{and}\quad 0 = \log_a(1).</me>
      We should note this algebraic fact fits with our geometric understanding.
      The graph of <m>\Exp{a}</m> passes through the point <m>(0,1)</m>.
      Since the graph of <m>\log_a</m> is the reflection of the graph of <m>\Exp{a}</m> across the line <m>y = x</m>, it should pass through the point <m>(1,0)</m>.
    </p>
    <p>
      If we introduce another real number, <m>x^\prime</m>, then we obtain a second positive real number, <m>y^\prime = \Exp{a}\left(x^\prime\right)</m>.
      The function <m>\Exp{a}</m> maps the sum of these numbers to the product of their pairs
      <me>\Exp{a}(x + x^\prime) = \Exp{a}(x)\Exp{a}(x^\prime) = yy^\prime,</me>
      so the right-hand side of <xref ref="eq-exp_log"/> tells us that the logarithm pairs the product of positive real numbers with the sum of their pairs
      <me>x + x^\prime = \log\left(yy^\prime\right).</me>
    </p>
    <p>
      Similarly, the function <m>\Exp{a}</m> maps the difference of these numbers to the ratio of their pairs
      <me>\Exp{a}(x - x^\prime) = \frac{\Exp{a}(x)}{\Exp{a}(x^\prime)} = yy^\prime,</me>
      so the right-hand side of <xref ref="eq-exp_log"/> tells us that the logarithm pairs the ratio of positive real numbers with the difference of their pairs
      <me>x - x^\prime = \log\left(\frac{y}{y^\prime}\right).</me>
    </p>
    <p>
      Finally, we make the following observation as a convenience.
      If <m>y</m> is any positive real number and <m>r</m> is any real number, then we think of <m>y^r</m> as the product of <m>r</m> copies of the number <m>y</m>
      <me>y^r = \underbrace{y \cdot y \cdot y \cdots y}_r.</me>
      If we transform the log of the product into the sum of the logs <m>r</m> times, then we obtain the expression
      <md>
	<mrow>\log_a(y^r) \amp= \log_a(y) + \log_a(y^{r-1})</mrow>
	<mrow>\amp= \log_a(y) + \log_a(y) + \log_a(y^{r-2})</mrow>
	<mrow>\amp= \cdots</mrow>
	<mrow>\amp= \underbrace{\log_a(y) + \log_a(y) + \cdots + \log_a(y)}_r</mrow>
	<mrow>\amp= r\log_a(y).</mrow>
      </md>
    </p>
    <p>
      We summarize these properties below.
    </p>

    <theorem xml:id="thm-properties_log">
      <title>Properties of the Logarithm</title>
      <p>
	Assume <m>a \neq 1</m> is a positive real number and <m>y, y^\prime</m> are positive real numbers.
      </p>
      <ol>
	<li>
	  <m>\log_a(1) = 0.</m>
	</li>
	<li>
	  <m>\log_a(yy^\prime) = \log_a(y) + \log_a(y^\prime).</m>
	</li>
	<li>
	  <m>\log_a\left(\frac{y}{y^\prime}\right) = \log_a(y) - \log_a(y^\prime).</m>
	</li>
	<li>
	  <m>\log_a(y^r) = r\log_a(y).</m>
	</li>
      </ol>
    </theorem>
  </subsection>

  <subsection>
    <title>The Change of Base Formulas</title>
    <p>
      While inverse functions have many nice properties, it is often difficult to perform computations with them.
      For example, we can compute
      <me>\log_2(64) = \log_2(2^6) \log_2 \circ \Exp{2}(6) = 6</me>
      using the properties of inverse functions.
      Unfortunately, none of the properties we have discussed help us to compute <m>\log_2(5)</m>.
      At best, we can observe that
      <me>2^2 = 4 \lt 5 \lt 9 = 2^3</me>
      tells us <m>2 \lt \log_2(5) \lt 3</m>.
      If we need a better approximation to the value of <m>\log_2(5)</m>, then we will need the assistance of a computer.
    </p>
    <p>
      On a modern computational tool like <url href="https://desmos.com/" visual="desmos.com">Desmos</url>, the underscore symbol <c>_</c> can be used to enter the command <c>log_2(5)</c> and the result is
      <me>\log_2(5) \approx 2.32192809489.</me>
      However, on most scientific and graphing calculators, there are only buttons labelled <c>log</c> and <c>ln</c> for the logarithms with base <m>10</m> and base <m>e</m>, respectively.
    </p>
    <p>
      Fortunately, we can use the properties of the logarithm to rewrite a logarithm with base <m>a</m> as a logarithm with a different base, <m>b</m>.
      Assume <m>y</m> is a positive real number.
      Let <m>x = \log_a(y)</m> so that <m>y = a^x</m>.
      First, rewrite
      <me>a = \exp_b \circ \log_b(a) = b^{\log_b(a)}</me>
      so we have
      <md>
	<mrow>\amp y = a^x = \left(b^{\log_b(a)}\right)^x = b^{x\log_b(a)} \amp\amp \text{Apply}\ \log_b\ \text{to both sides}</mrow>
	<mrow>\amp \log_b(y) = x\log_b(a) \amp\amp \text{Rewrite}\ x = \log_a(y)</mrow>
	<mrow>\amp \log_b(y) = \log_a(y)\log_b(a) \amp\amp\text{Divide both sides by}\ \log_b(a)</mrow>
	<mrow>\amp \log_a(y) = \frac{\log_b(y)}{\log_b(a)}.</mrow>
      </md>
      This gives us a way to convert the logarithm with base <m>a</m> to a logarithm with base <m>b</m>.
    </p>

    <claim xml:id="formula-base_change">
      <title>Base Change for Logarithms</title>
      <statement>
	<p>
	  Assume <m>a \neq 1</m> and <m>b \neq 1</m> are positive real numbers.
	  For all positive real numbers <m>y</m>,
	  <me>\log_a(y) = \frac{\log_b(y)}{\log_b(a)}.</me>
	</p>
      </statement>
    </claim>
    
    <example>
      <p>
	To compute <m>\log_2(5)</m> on a calculator, compute
	<me>\log_2(5) = \frac{\log(5)}{\log(2)} \approx 2.32192809489</me>
	or
	<me>\log_2(5) = \frac{\ln(5)}{\ln(2)} \approx 2.32192809489</me>
      </p>
    </example>

    <p>
      In some sense, this justifies calling <m>\exp(x) = e^x</m> <em>the</em> exponential function.
      For any positive number <m>a \neq 1</m>, we can write
      <me>\Exp{a}(x) = a^x = \left(e^{\ln(a)}\right)^x = e^{\ln(a)x} = \exp(\ln(a)x)</me>
      which allows us to regard the function <m>\Exp{a}</m> as a horizontal scaling of the function <m>\exp</m> by <m>\ln(a)</m>.
      Similarly, we can write
      <me>\log_a(y) = \frac{\ln(y)}{\ln(a)}</me>
      so the function <m>\log_a</m> is a vertical scaling of the function <m>\ln</m>.
    </p>
  </subsection>
  
  <subsection>
    <title>Graphs of Logarithms</title>
    <p>
      Since <m>\log_a \colon (0, \infty) \to \R</m> is the composition of <m>\Exp{a} \colon \R \to (0, \infty)</m>, the graph of <m>y = \log_a(x)</m> is the reflection of the graph of <m>y = \Exp{a}(x)</m> across the line <m>y = x</m>.
      Just as for exponentials, the logarithms have the same basic shape depending on whether <m>1 \lt a</m> or <m>a \lt 1</m>.
      We have plotted the reflections across the <m>y</m>-axis of the exponential growth functions in <xref ref="fig-exponential_growth"/> below.
    </p>

    <figure xml:id="fig-refl_exponential_growth">
      <image>
	<latex-image>
	  \begin{tikzpicture}[pics/legend entry/.style={code={%
          \draw[pic actions]
	  (-0.5,0.25) -- (0.5,0.25);}}]
	  \draw[very thin,color=gray] (-5,-5) grid (5,5);

	  \draw[very thick,->] (-5.2,0) -- (5.2,0) node[right] {$x$};
	  \draw[very thick,->] (0,-5.2) -- (0,5.2) node[above] {$y$};
	  
	  \begin{scope}[domain=-5:3]
	  \clip (-5,-5) rectangle (5,5);
	  \draw [color=red,thick] plot[smooth,samples=500] ({2^(\x)},\x);
	  \draw [color=orange,thick] plot[smooth,samples=500] ({3^(\x)},\x);
	  \draw [color=yellow,thick] plot[smooth,samples=500] ({4^(\x)},\x);
	  \draw [color=green!70!black,thick] plot[smooth,samples=500] ({5^(\x)},\x);
	  \draw [color=blue,thick] plot[smooth,samples=500] ({6^(\x)},\x);
	  \draw [color=blue!50,thick] plot[smooth,samples=500] ({7^(\x)},\x);
	  \draw [color=violet,thick] plot[smooth,samples=500] ({8^(\x)},\x);
	  \end{scope}


	  \node at (1,0) {$\bullet$};
	  \node [above left] at (1,0) {$(1,0)$};

	  \matrix [draw, above left] at (8,0) {
	  \pic[red]{legend entry}; \amp  \node[red,font=\tiny] {$\log_2(x)$}; \\
	  \pic[orange]{legend entry}; \amp  \node[orange,font=\tiny] {$\log_3(x)$}; \\
	  \pic[yellow]{legend entry}; \amp  \node[yellow!75!black,font=\tiny] {$\log_4(x)$}; \\
	  \pic[green!70!black]{legend entry}; \amp  \node[green!70!black,font=\tiny] {$\log_5(x)$}; \\
	  \pic[blue]{legend entry}; \amp  \node[blue,font=\tiny] {$\log_6(x)$}; \\
	  \pic[blue!50]{legend entry}; \amp  \node[blue!50,font=\tiny] {$\log_7(x)$}; \\
	  \pic[violet]{legend entry}; \amp  \node[violet,font=\tiny] {$\log_8(x)$}; \\
	  };
	  
	  \end{tikzpicture}
	</latex-image>
      </image>
      <caption>The graphs of the logarithms with base <m>2</m>, <m>3</m>, <m>4</m>, <m>5</m>, <m>6</m>, <m>7</m>, and <m>8</m></caption>
    </figure>

    <p>
      For any positive real number <m>a \neq 1</m>, we can relate the graph of <m>y = \log_a(x)</m> to the graph of <m>y = \log_{1/a}(x)</m> using the <xref ref="formula-base_change" text="title"/>.
      Write <m>1/a = a^{-1}</m> so that for all positive numbers <m>x</m>,
      <me>\log_{a^{-1}}(x) = \frac{\log_a(x)}{\log_a(a^{-1})} = \frac{\log_a(x)}{-1} = -\log_a(x).</me>
      This tells us the graph of <m>y = \log_a(x)</m> is the reflection of <m>y = \log_{a^{-1}}(x)</m> across the <m>x</m>-axis.
    </p>
    
    <example>
      <p>
	Consider the logarithm with base <m>1/2</m>.
	For all positive real numbers <m>y</m>,
	<me>\log_{\frac{1}{2}}(y) = \frac{\log_2(y)}{\log_2\left(\frac{1}{2}\right)} = \frac{\log_2(y)}{-1} = -\log_2(y)</me>
	by the <xref ref="formula-base_change" text="title"/>.
	This tells us that we can graph <m>\log_{\frac{1}{2}}(y)</m> by reflecting the graph of <m>\log_2(y)</m> across the <m>x</m>-axis.
      </p>
    </example>

    <p>
      We have plotted the reflections across the <m>x</m>-axis of the logarithms in <xref ref="fig-refl_exponential_growth"/> below.
    </p>
    
    
    <figure>
      <image>
	<latex-image>
	  \begin{tikzpicture}[pics/legend entry/.style={code={%
          \draw[pic actions]
	  (-0.5,0.25) -- (0.5,0.25);}}]
	  \draw[very thin,color=gray] (-5,-5) grid (5,5);

	  \draw[very thick,->] (-5.2,0) -- (5.2,0) node[right] {$x$};
	  \draw[very thick,->] (0,-5.2) -- (0,5.2) node[above] {$y$};
	  
	  \begin{scope}[domain=-3:5]
	  \clip (-5,-5) rectangle (5,5);
	  \draw [color=red,thick] plot[smooth,samples=500] ({2^(-\x)},\x);
	  \draw [color=orange,thick] plot[smooth,samples=500] ({3^(-\x)},\x);
	  \draw [color=yellow,thick] plot[smooth,samples=500] ({4^(-\x)},\x);
	  \draw [color=green!70!black,thick] plot[smooth,samples=500] ({5^(-\x)},\x);
	  \draw [color=blue,thick] plot[smooth,samples=500] ({6^(-\x)},\x);
	  \draw [color=blue!50,thick] plot[smooth,samples=500] ({7^(-\x)},\x);
	  \draw [color=violet,thick] plot[smooth,samples=500] ({8^(-\x)},\x);
	  \end{scope}


	  \node at (1,0) {$\bullet$};
	  \node [above left] at (1,0) {$(1,0)$};

	  \matrix [draw, above left] at (8,0) {
	  \pic[red]{legend entry}; \amp  \node[red,font=\tiny] {$\log_{\frac{1}{2}}(x)$}; \\
	  \pic[orange]{legend entry}; \amp  \node[orange,font=\tiny] {$\log_{\frac{1}{3}}(x)$}; \\
	  \pic[yellow]{legend entry}; \amp  \node[yellow!75!black,font=\tiny] {$\log_{\frac{1}{4}}(x)$}; \\
	  \pic[green!70!black]{legend entry}; \amp  \node[green!70!black,font=\tiny] {$\log_{\frac{1}{5}}(x)$}; \\
	  \pic[blue]{legend entry}; \amp  \node[blue,font=\tiny] {$\log_{\frac{1}{6}}(x)$}; \\
	  \pic[blue!50]{legend entry}; \amp  \node[blue!50,font=\tiny] {$\log_{\frac{1}{7}}(x)$}; \\
	  \pic[violet]{legend entry}; \amp  \node[violet,font=\tiny] {$\log_{\frac{1}{8}}(x)$}; \\
	  };
	  
	  \end{tikzpicture}
	</latex-image>
      </image>
      <caption>The graphs of the logarithms with base <m>1/2</m>, <m>1/3</m>, <m>1/4</m>, <m>1/5</m>, <m>1/6</m>, <m>1/7</m>, and <m>1/8</m></caption>
    </figure>
  </subsection>
</section>
